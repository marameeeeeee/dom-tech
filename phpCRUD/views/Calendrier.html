<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> CALENDRIER DES RENDEZ-VOUS </title>
    <link rel="stylesheet" href="calendrier.css">
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/js-year-calendar@latest/dist/js-year-calendar.min.css" />
</head>
<body>
    <div class="add-rdv-button">
        <a href="addRdv.php">Ajouter votre rendez-vous</a>
    </div>

    <div class="calendar"> </div>
    

        
    <script src="https://unpkg.com/js-year-calendar@latest/dist/js-year-calendar.min.js"></script>
    <script src="https://unpkg.com/js-year-calendar@latest/dist/js-year-calendar.umd.min.js"></script>
    <script src="https://unpkg.com/js-year-calendar@latest/locales/js-year-calendar.fr.js"></script>

<script> 

/*Calendar.locales['fr'] = {
	days: ["Dimanche", "Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi"],
	daysShort: ["Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam"],
	daysMin: ["D", "L", "Ma", "Me", "J", "V", "S"],
	months: ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"],
	monthsShort: ["Jan", "Fév", "Mar", "Avr", "Mai", "Jui", "Jul", "Aou", "Sep", "Oct", "Nov", "Déc"],
	weekShort:'S',
	weekStart: 1
};*/
 

/* LES ACTIONS SUR LE CALENDRIER 
require('../dist/js-year-calendar');

beforeEach(() => {
    document.body.innerHTML = '<div id="calendar"></div>';
});

const getDay = (month, day) => {
    return document.querySelectorAll(`#calendar .month-container:nth-child(${month + 1}) .day:not(.old):not(.new)`)[day - 1];
};

const currentYear = new Date().getFullYear();

const triggerEvent = (el, eventToTrigger) => {
    var ev = new MouseEvent(eventToTrigger, { which: 1, bubbles: true, cancelable: true });
    el.dispatchEvent(ev);
};

test('click on previous year', done => {
    const calendar = new Calendar('#calendar');

    // Previous year
    document.querySelectorAll('.year-neighbor')[0].click();
    setTimeout(() => {
        expect(calendar.getYear()).toEqual(currentYear - 1);
        done();
    }, 200);
});

test('click on next year', done => {
    const calendar = new Calendar('#calendar');

    // Previous year
    document.querySelectorAll('.year-neighbor')[1].click();
    setTimeout(() => {
        expect(calendar.getYear()).toEqual(currentYear + 1);
        done();
    }, 200);
});

test('click on previous 2 year', done => {
    const calendar = new Calendar('#calendar');

    // Previous year
    document.querySelectorAll('.year-neighbor2')[0].click();
    setTimeout(() => {
        expect(calendar.getYear()).toEqual(currentYear - 2);
        done();
    }, 200);
});

test('click on next 2 year', done => {
    const calendar = new Calendar('#calendar');

    // Previous year
    document.querySelectorAll('.year-neighbor2')[1].click();
    setTimeout(() => {
        expect(calendar.getYear()).toEqual(currentYear + 2);
        done();
    }, 200);
});


test('click on previous arrow', done => {
    const calendar = new Calendar('#calendar');

    // Previous year
    document.querySelector('.prev').click();
    setTimeout(() => {
        expect(calendar.getYear()).toEqual(currentYear - 1);
        done();
    }, 200);
});

test('click on next arrow', done => {
    const calendar = new Calendar('#calendar');

    // Previous year
    document.querySelector('.next').click();
    setTimeout(() => {
        expect(calendar.getYear()).toEqual(currentYear + 1);
        done();
    }, 200);
});

test('range selection without option', () => {
    const calendar = new Calendar('#calendar');

    var begin = getDay(2, 2);
    var end = getDay(2, 10);
    triggerEvent(begin, 'mousedown');
    triggerEvent(end, 'mouseenter');

    // Option enable range selection is not enabled. The range shouldn't exist.
    expect(begin.classList).not.toContain('range');
    expect(end.classList).not.toContain('range');
});

test('range selection with option', () => {
    const calendar = new Calendar('#calendar', { enableRangeSelection: true });

    var begin = getDay(2, 2);
    var end = getDay(2, 10);
    triggerEvent(begin, 'mousedown');
    triggerEvent(end, 'mouseenter');

    expect(getDay(2, 1).classList).not.toContain('range');
    expect(begin.classList).toContain('range');
    expect(begin.classList).toContain('range-start');
    expect(getDay(2, 5).classList).toContain('range');
    expect(end.classList).toContain('range');
    expect(end.classList).toContain('range-end');
    expect(getDay(2, 11).classList).not.toContain('range');
});

test('range selection without overlap', () => {
    const calendar = new Calendar('#calendar', {
        enableRangeSelection: true,
        allowOverlap: false,
        dataSource: [
            { startDate: new Date(currentYear, 2, 6), endDate: new Date(currentYear, 2, 15) }
        ]
    });

    var begin = getDay(2, 2);
    var end = getDay(2, 10);
    triggerEvent(begin, 'mousedown');
    triggerEvent(end, 'mouseenter');

    expect(getDay(2, 5).classList).toContain('range');
    expect(getDay(2, 5).classList).toContain('range-end');
    expect(getDay(2, 7).classList).not.toContain('range');
    expect(end.classList).not.toContain('range');
});

test('range selection with overlap', () => {
    const calendar = new Calendar('#calendar', {
        enableRangeSelection: true,
        allowOverlap: true,
        dataSource: [
            { startDate: new Date(currentYear, 2, 6), endDate: new Date(currentYear, 2, 15)}
        ]
    });

    var begin = getDay(2, 2);
    var end = getDay(2, 10);
    triggerEvent(begin, 'mousedown');
    triggerEvent(end, 'mouseenter');

    expect(getDay(2, 5).classList).toContain('range');
    expect(getDay(2, 5).classList).not.toContain('range-end');
    expect(end.classList).toContain('range');
    expect(end.classList).toContain('range-end');
});

test('context menu', () => {
    const calendar = new Calendar('#calendar', {
        enableContextMenu: false,
        contextMenuItems: [
            {
                text: 'Test 1',
                items: [{ text: 'Subtest 1'}] 
            },
            { text: 'Test 2' }
        ],
        dataSource: [
            { name: 'Event 1', startDate: new Date(currentYear, 2, 6), endDate: new Date(currentYear, 2, 15)}
        ]
    });

    var checkContextMenuVisible = () =>
        document.querySelector('.calendar-context-menu')
            && document.querySelector('.calendar-context-menu').style.display == 'block';

    // Context menu not enabled
    triggerEvent(getDay(2, 10), 'contextmenu');
    expect(checkContextMenuVisible()).toBeFalsy();

    calendar.setEnableContextMenu(true);

    // Day with no event
    triggerEvent(getDay(2, 2), 'contextmenu');
    expect(checkContextMenuVisible()).toBeFalsy();

    // Day with events
    triggerEvent(getDay(2, 10), 'contextmenu');
    expect(checkContextMenuVisible()).toBeTruthy();
    expect(document.querySelector('.calendar-context-menu').children.length).toEqual(1);
    expect(document.querySelector('.calendar-context-menu > .item > .content > .text').textContent).toEqual('Event 1');
    expect(document.querySelectorAll('.calendar-context-menu > .item > .submenu > .item').length).toEqual(2);
    expect(document.querySelector('.calendar-context-menu > .item > .submenu > .item:first-child > .content > .text').textContent).toEqual('Test 1');
    expect(document.querySelectorAll('.calendar-context-menu > .item > .submenu > .item:first-child > .submenu > .item').length).toEqual(1);
    expect(document.querySelector('.calendar-context-menu > .item > .submenu > .item:first-child > .submenu > .item > .content > .text').textContent).toEqual('Subtest 1');
    expect(document.querySelector('.calendar-context-menu > .item > .submenu > .item:nth-child(2) > .content > .text').textContent).toEqual('Test 2');
});*/

/* LES EVENMETS POSSIBLES 
require('../dist/js-year-calendar');

beforeEach(() => {
    document.body.innerHTML = '<div id="calendar"></div>';
});

const getDay = (month, day) => {
    return document.querySelectorAll(`#calendar .month-container:nth-child(${month + 1}) .day:not(.old):not(.new)`)[day - 1];
};

const currentYear = new Date().getFullYear();

const triggerEvent = (el, eventToTrigger) => {
    var ev = new MouseEvent(eventToTrigger, { which: 1, bubbles: true, cancelable: true });
    el.dispatchEvent(ev);
};

const testDayEvent = (eventName, eventToTrigger) => {
    const simplifyEventsParams = e => ({ calendar: e.calendar, date: e.date, eltId: e.element.id, events: e.events.map(ev => ev.name) });

    const eventInit = jest.fn(simplifyEventsParams);
    const eventAdded = jest.fn(simplifyEventsParams);

    document.querySelector('#calendar').addEventListener(eventName, eventAdded);

    const calendar = new Calendar('#calendar', {
        [eventName]: eventInit,
        dataSource: [
            {
                name: "test1",
                startDate: new Date(currentYear, 6, 10),
                endDate: new Date(currentYear, 6, 20)
            },
            {
                name: "test2",
                startDate: new Date(currentYear, 7, 10),
                endDate: new Date(currentYear, 7, 20)
            }
        ]
    });

    let dayElt = getDay(6, 8);
    dayElt.id = "test1";
    triggerEvent(dayElt, eventToTrigger);
    expect(eventInit).toHaveNthReturnedWith(1, { calendar, date: new Date(currentYear, 6, 8), eltId: "test1", events: [] });
    expect(eventAdded).toHaveNthReturnedWith(1, { calendar,date: new Date(currentYear, 6, 8), eltId: "test1", events: [] });

    dayElt = getDay(6, 12);
    dayElt.id = "test2";
    triggerEvent(dayElt, eventToTrigger);
    expect(eventInit).toHaveNthReturnedWith(2, { calendar, date: new Date(currentYear, 6, 12), eltId: "test2", events: ['test1'] });
    expect(eventAdded).toHaveNthReturnedWith(2, { calendar, date: new Date(currentYear, 6, 12), eltId: "test2", events: ['test1'] });
};

test('click day event', () => {
    testDayEvent('clickDay', 'click');
});

test('day context menu event', () => {
    testDayEvent('dayContextMenu', 'contextmenu');
});

test('mouse on day event', () => {
    testDayEvent('mouseOnDay', 'mouseenter');
});

test('mouse out day event', () => {
    testDayEvent('mouseOutDay', 'mouseleave');
});

test('render end event', () => {
    const renderEndInit = jest.fn(e => ({ calendar: e.calendar, currentYear: e.currentYear, startDate: e.startDate, endDate: e.endDate }));
    const renderEndAdded = jest.fn(e => ({ calendar: e.calendar, currentYear: e.currentYear, startDate: e.startDate, endDate: e.endDate }));

    document.querySelector('#calendar').addEventListener('renderEnd', renderEndAdded);
    const calendar = new Calendar('#calendar', { renderEnd: renderEndInit });

    calendar.setYear(2000);

    let endDate = new Date(currentYear + 1, 0, 1);
    endDate.setTime(endDate.getTime() - 1);
    expect(renderEndInit).toHaveNthReturnedWith(1, { calendar, currentYear, startDate: new Date(currentYear, 0, 1), endDate: endDate });
    expect(renderEndAdded).toHaveNthReturnedWith(1, { calendar, currentYear, startDate: new Date(currentYear, 0, 1), endDate: endDate });

    endDate = new Date(2001, 0, 1);
    endDate.setTime(endDate.getTime() - 1);
    expect(renderEndInit).toHaveNthReturnedWith(2, { calendar, currentYear: 2000, startDate: new Date(2000, 0, 1), endDate: endDate });
    expect(renderEndAdded).toHaveNthReturnedWith(2, { calendar, currentYear: 2000, startDate: new Date(2000, 0, 1), endDate: endDate });
});


test('select range event', () => {
    const selectRangeInit = jest.fn(e => ({ calendar: e.calendar, startDate: e.startDate, endDate: e.endDate }));
    const selectRangeAdded = jest.fn(e => ({ calendar: e.calendar, startDate: e.startDate, endDate: e.endDate }));

    document.querySelector('#calendar').addEventListener('selectRange', selectRangeAdded);
    const calendar = new Calendar('#calendar', { enableRangeSelection: true, selectRange: selectRangeInit });

    triggerEvent(getDay(8, 10), "mousedown");
    triggerEvent(getDay(9, 20), "mouseenter");
    triggerEvent(getDay(9, 20), "mouseup");

    expect(selectRangeInit).toHaveNthReturnedWith(1, { calendar, startDate: new Date(currentYear, 8, 10), endDate: new Date(currentYear, 9, 20) });
    expect(selectRangeAdded).toHaveNthReturnedWith(1, { calendar, startDate: new Date(currentYear, 8, 10), endDate: new Date(currentYear, 9, 20) });
});

test('year changed event', () => {
    const yearChangedInit = jest.fn(e => ({ calendar: e.calendar, currentYear: e.currentYear }));
    const yearChangedAdded = jest.fn(e =>  ({ calendar: e.calendar, currentYear: e.currentYear }));

    document.querySelector('#calendar').addEventListener('yearChanged', yearChangedAdded);
    const calendar = new Calendar(document.querySelector('#calendar'), { yearChanged: yearChangedInit });

    calendar.setYear(2000);

    expect(yearChangedInit).toHaveNthReturnedWith(1, { calendar, currentYear });
    expect(yearChangedAdded).toHaveNthReturnedWith(1, { calendar, currentYear });

    expect(yearChangedInit).toHaveNthReturnedWith(2, { calendar, currentYear: 2000 });
    expect(yearChangedAdded).toHaveNthReturnedWith(2, { calendar, currentYear: 2000 });
});*/

/* require('../dist/js-year-calendar');
require('../locales/js-year-calendar.fr');

beforeEach(() => {
    document.body.innerHTML = '<div id="calendar"></div>';
});

const getDay = (month, day) => {
    return document.querySelectorAll(`#calendar .month-container:nth-child(${month + 1}) .day:not(.old):not(.new)`)[day - 1];
};

const currentYear = new Date().getFullYear();

test('instantiate calendar with element', () => {
    const calendar = new Calendar(document.querySelector('#calendar'));
  
    expect(document.querySelector('#calendar').children.length).toEqual(2);

    // Header
    expect(document.querySelector('#calendar .calendar-header')).not.toBeNull();
    expect(document.querySelector('#calendar .calendar-header .prev')).not.toBeNull();
    expect(document.querySelector('#calendar .calendar-header .next')).not.toBeNull();
    expect(document.querySelectorAll('#calendar .year-neighbor').length).toEqual(2);
    expect(document.querySelectorAll('#calendar .year-neighbor2').length).toEqual(2);
    expect(document.querySelector('#calendar .year-title:not(.year-neighbor):not(.year-neighbor2').textContent).toEqual(currentYear.toString());

    // Body
    expect(document.querySelector('#calendar .months-container')).not.toBeNull();
    expect(document.querySelector('#calendar .months-container').children.length).toEqual(12);

    const currentDate = new Date();
    currentDate.setMonth(0);
    currentDate.setDate(1);

    while (currentDate.getFullYear() == currentYear) {
        expect(getDay(currentDate.getMonth(), currentDate.getDate()).textContent).toEqual(currentDate.getDate().toString());
        currentDate.setDate(currentDate.getDate() + 1);
    }
});

test('instantiate calendar with selector', () => {
    const calendar = new Calendar('#calendar');
  
    expect(document.querySelector('#calendar').children.length).toEqual(2);
});

test('instantiate calendar with other', () => {
    expect(() => new Calendar(null)).toThrow();
});

test('instantiate calendar with start date', () => {
    const calendar = new Calendar('#calendar', { startDate: new Date(2000, 5, 1) });
  
    expect(document.querySelectorAll('#calendar .year-title').length).toEqual(1);
    expect(document.querySelector('#calendar .year-title').textContent).toEqual("2000 - 2001");
    expect(document.querySelectorAll('#calendar .month').length).toEqual(12);
});

test('instantiate calendar with start date and number months displayed', () => {
    const calendar = new Calendar('#calendar', { startDate: new Date(2000, 10, 1), numberMonthsDisplayed: 3 });
  
    expect(document.querySelectorAll('#calendar .year-title').length).toEqual(1);
    expect(document.querySelector('#calendar .year-title').textContent).toEqual("November 2000 - January 2001");
    expect(document.querySelectorAll('#calendar .month').length).toEqual(3);
});

test('instantiate calendar with start date and single month displayed', () => {
    const calendar = new Calendar('#calendar', { startDate: new Date(2000, 5, 1), numberMonthsDisplayed: 1 });
  
    expect(document.querySelectorAll('#calendar .year-title').length).toEqual(1);
    expect(document.querySelector('#calendar .year-title').textContent).toEqual("June 2000");
    expect(document.querySelectorAll('#calendar .month').length).toEqual(1);
});

test('instantiate calendar with start year', () => {
    const calendar = new Calendar('#calendar', { startYear: 2000 });
  
    expect(document.querySelectorAll('#calendar .year-title').length).toEqual(5);
    expect(document.querySelector('#calendar .year-title:not(.year-neighbor):not(.year-neighbor2').textContent).toEqual("2000");
    expect(document.querySelectorAll('#calendar .month').length).toEqual(12);
});

test('instantiate calendar with min date', () => {
    const calendar = new Calendar('#calendar', { minDate: new Date(currentYear, 2, 5) });
  
    expect(Array.from(getDay(2, 4).classList)).toContain('disabled');
    expect(Array.from(getDay(2, 5).classList)).not.toContain('disabled');

    calendar.setYear(currentYear - 1);

    expect(Array.from(getDay(0, 1).classList)).toContain('disabled');
    expect(Array.from(getDay(11, 31).classList)).toContain('disabled');

    calendar.setYear(currentYear + 1);

    expect(Array.from(getDay(0, 1).classList)).not.toContain('disabled');
    expect(Array.from(getDay(11, 31).classList)).not.toContain('disabled');
});

test('instantiate calendar with max date', () => {
    const calendar = new Calendar('#calendar', { maxDate: new Date(currentYear, 7, 18) });
  
    expect(Array.from(getDay(7, 18).classList)).not.toContain('disabled');
    expect(Array.from(getDay(7, 19).classList)).toContain('disabled');

    calendar.setYear(currentYear - 1);

    expect(Array.from(getDay(0, 1).classList)).not.toContain('disabled');
    expect(Array.from(getDay(11, 31).classList)).not.toContain('disabled');

    calendar.setYear(currentYear + 1);

    expect(Array.from(getDay(0, 1).classList)).toContain('disabled');
    expect(Array.from(getDay(11, 31).classList)).toContain('disabled');
});

test('instantiate calendar with language', () => {
    const calendar = new Calendar('#calendar', { language: 'fr' });
  
    expect(document.querySelector('.month-container:first-child .month-title').textContent).toEqual("Janvier");
    expect(document.querySelectorAll('.month-container:first-child .day-header')[0].textContent).toEqual("L");
});

test('instantiate calendar with default style', () => {
    const calendar = new Calendar('#calendar', { 
		dataSource: [
			{
				startDate: new Date(currentYear, 6, 10),
				endDate: new Date(currentYear, 6, 20)
            },
            {
				startDate: new Date(currentYear, 6, 19),
				endDate: new Date(currentYear, 6, 20)
            },
            {
				startDate: new Date(currentYear, 6, 20),
				endDate: new Date(currentYear, 6, 20)
			}
		]
    });

    expect(getDay(6, 9).style.boxShadow).toBeFalsy();

    for (let i = 10; i <= 18; i++) {
        expect(getDay(6, i).style.boxShadow).toBeTruthy();
        expect(getDay(6, i).style.boxShadow.split(',').length).toEqual(1);
    }

    expect(getDay(6, 19).style.boxShadow).toBeTruthy();
    expect(getDay(6, 19).style.boxShadow.split(',').length).toEqual(2);

    expect(getDay(6, 20).style.boxShadow).toBeTruthy();
    expect(getDay(6, 20).style.boxShadow.split(',').length).toEqual(3);

    expect(getDay(6, 21).style.boxShadow).toBeFalsy();
});

test('instantiate calendar with background style', () => {
    const calendar = new Calendar('#calendar', {
		style: 'background',
		dataSource: [
			{
				startDate: new Date(currentYear, 6, 10),
				endDate: new Date(currentYear, 6, 20)
			}
		]
    });

    expect(getDay(6, 9).style.backgroundColor).toBeFalsy();

    for (let i = 10; i <= 20; i++) {
        expect(getDay(6, i).style.backgroundColor).toBeTruthy();
    }

    expect(getDay(6, 21).style.backgroundColor).toBeFalsy();
});

test('instantiate calendar with no header', () => {
    const calendar = new Calendar('#calendar', { displayHeader: false });

    expect(document.querySelector('#calendar').children.length).toEqual(1);
    expect(Array.from(document.querySelector('#calendar').children[0].classList)).toContain('months-container');
});

test('instantiate calendar with week numbers', () => {
    const calendar = new Calendar('#calendar', { displayWeekNumber: true });

    expect(document.querySelector('.month-container:first-child .week-number').textContent).toEqual("W");

    document.querySelectorAll('.month-container tr:not(:first-child)').forEach(tr => {
        expect(tr.children.length).toEqual(8);
    })
});

test('instantiate calendar with round limits', () => {
    const calendar = new Calendar('#calendar', {
        style: 'background',
        roundRangeLimits: true,
		dataSource: [
			{
				startDate: new Date(currentYear, 6, 10),
				endDate: new Date(currentYear, 6, 20)
			}
		]
    });

    expect(Array.from(getDay(6, 10).classList)).toContain("round-left");
    expect(Array.from(getDay(6, 20).classList)).toContain("round-right");
});

test('instantiate calendar with disable days', () => {
    const calendar = new Calendar('#calendar', {
		disabledDays: [
            new Date(currentYear, 4, 1),
            new Date(currentYear, 5, 1)
        ]
    });

    expect(Array.from(getDay(4, 1).classList)).toContain("disabled");
    expect(Array.from(getDay(4, 2).classList)).not.toContain("disabled");

    expect(Array.from(getDay(5, 1).classList)).toContain("disabled");
    expect(Array.from(getDay(5, 2).classList)).not.toContain("disabled");
});

test('instantiate calendar with disabled week days', () => {
    const calendar = new Calendar('#calendar', {
		disabledWeekDays: [1, 3, 5]
    });
    
    const currentDate = new Date();
    currentDate.setMonth(0);
    currentDate.setDate(1);

    while (currentDate.getFullYear() == currentYear) {
        var check = expect(Array.from(getDay(currentDate.getMonth(), currentDate.getDate()).classList));

        if (currentDate.getDay() == 1 || currentDate.getDay() == 3 || currentDate.getDay() == 5) {
            check.toContain('disabled');
        }
        else {
            check.not.toContain('disabled');
        }

        currentDate.setDate(currentDate.getDate() + 1);
    }
});

test('instantiate calendar with hidden week days', () => {
    const calendar = new Calendar('#calendar', {
		hiddenWeekDays: [0, 2, 4]
    });
    
    const currentDate = new Date();
    currentDate.setMonth(0);
    currentDate.setDate(1);

    while (currentDate.getFullYear() == currentYear) {
        var check = expect(Array.from(getDay(currentDate.getMonth(), currentDate.getDate()).classList));

        if (currentDate.getDay() == 0 || currentDate.getDay() == 2 || currentDate.getDay() == 4) {
            check.toContain('hidden');
        }
        else {
            check.not.toContain('hidden');
        }

        currentDate.setDate(currentDate.getDate() + 1);
    }
});

test('instantiate calendar with display disabled data source', () => {
    const calendar = new Calendar('#calendar', {
        style: 'background',
        disabledDays: [new Date(currentYear, 6, 15)],
        displayDisabledDataSource: true,
		dataSource: [
			{
				startDate: new Date(currentYear, 6, 10),
				endDate: new Date(currentYear, 6, 20)
			}
		]
    });
    
    expect(getDay(6, 14).style.backgroundColor).toBeTruthy();
    expect(getDay(6, 15).style.backgroundColor).toBeTruthy();

    calendar.setDisplayDisabledDataSource(false);

    expect(getDay(6, 14).style.backgroundColor).toBeTruthy();
    expect(getDay(6, 15).style.backgroundColor).toBeFalsy();
});

test('instantiate calendar with data source function', () => {
    const dataSource = jest.fn(period => [
        {
            startDate: new Date(period.year, 6, period.year - 2000),
            endDate: new Date(period.year, 6, period.year - 2000)
        }
    ]);

    const calendar = new Calendar('#calendar', {
        startYear: 2001,
		dataSource: dataSource
    });
    
    expect(dataSource).toHaveBeenCalledTimes(1);
    
    let endDate = new Date(2002, 0, 1);
    endDate.setTime(endDate.getTime() - 1);
    expect(dataSource).toHaveBeenLastCalledWith({ year: 2001, startDate: new Date(2001, 0, 1), endDate });
    expect(getDay(6, 1).style.boxShadow).toBeTruthy();
    expect(getDay(6, 2).style.boxShadow).toBeFalsy();
    
    calendar.setYear(2002);
    expect(dataSource).toHaveBeenCalledTimes(2);
    endDate.setFullYear(2002);
    expect(dataSource).toHaveBeenLastCalledWith({ year: 2002, startDate: new Date(2002, 0, 1), endDate });
    expect(getDay(6, 1).style.boxShadow).toBeFalsy();
    expect(getDay(6, 2).style.boxShadow).toBeTruthy();
});

test('instantiate calendar with data source function and custom period', () => {
    const dataSource = jest.fn(period => [
        {
            startDate: new Date(period.startDate.getFullYear(), period.startDate.getMonth(), period.startDate.getMonth()),
            endDate: new Date(period.startDate.getFullYear(), period.startDate.getMonth(), period.startDate.getMonth()),
        }
    ]);

    const calendar = new Calendar('#calendar', {
        startDate: new Date(2001, 2, 1),
        numberMonthsDisplayed: 2,
		dataSource: dataSource
    });
    
    expect(dataSource).toHaveBeenCalledTimes(1);
    
    let endDate = new Date(2001, 4, 1);
    endDate.setTime(endDate.getTime() - 1);
    expect(dataSource).toHaveBeenLastCalledWith({ year: 2001, startDate: new Date(2001, 2, 1), endDate });
    expect(getDay(0, 2).style.boxShadow).toBeTruthy();
    expect(getDay(0, 6).style.boxShadow).toBeFalsy();
    
    calendar.setStartDate(new Date(2001, 6, 1));
    expect(dataSource).toHaveBeenCalledTimes(2);
    endDate = new Date(2001, 8, 1);
    endDate.setTime(endDate.getTime() - 1);
    expect(dataSource).toHaveBeenLastCalledWith({ year: 2001, startDate: new Date(2001, 6, 1), endDate });
    expect(getDay(0, 2).style.boxShadow).toBeFalsy();
    expect(getDay(0, 6).style.boxShadow).toBeTruthy();
});

test('instantiate calendar with data source callback function', () => {
    const dataSource = jest.fn((period, callback) => {
        callback([
            {
                startDate: new Date(period.year, 6, period.year - 2000),
                endDate: new Date(period.year, 6, period.year - 2000)
            }
        ]);
    });

    const calendar = new Calendar('#calendar', {
        startYear: 2001,
		dataSource: dataSource
    });
    
    expect(dataSource).toHaveBeenCalledTimes(1);
    expect(getDay(6, 1).style.boxShadow).toBeTruthy();
    expect(getDay(6, 2).style.boxShadow).toBeFalsy();
    
    calendar.setYear(2002);
    expect(dataSource).toHaveBeenCalledTimes(2);
    expect(getDay(6, 1).style.boxShadow).toBeFalsy();
    expect(getDay(6, 2).style.boxShadow).toBeTruthy();
});

test('instantiate calendar with data source promise function', done => {
    const dataSource = jest.fn(period => new Promise((resolve, reject) => {
        resolve([
            {
                startDate: new Date(period.year, 6, period.year - 2000),
                endDate: new Date(period.year, 6, period.year - 2000)
            }
        ]);
    }));

    const calendar = new Calendar('#calendar', {
        startYear: 2001,
		dataSource: dataSource
    });

    expect(dataSource).toHaveBeenCalledTimes(1);
    const endDate = new Date(2002, 0, 1);
    endDate.setTime(endDate.getTime() - 1);
    expect(dataSource).toHaveBeenLastCalledWith({ year: 2001, startDate: new Date(2001, 0, 1), endDate });

    setTimeout(() => {
        expect(getDay(6, 1).style.boxShadow).toBeTruthy();
        expect(getDay(6, 2).style.boxShadow).toBeFalsy();
        
        calendar.setYear(2002);
        expect(dataSource).toHaveBeenCalledTimes(2);
        endDate.setFullYear(2002);
        expect(dataSource).toHaveBeenLastCalledWith({ year: 2002, startDate: new Date(2002, 0, 1), endDate });

        setTimeout(() => {
            expect(getDay(6, 1).style.boxShadow).toBeFalsy();
            expect(getDay(6, 2).style.boxShadow).toBeTruthy(); 
            
            done();
        }, 0);
    }, 0);
});*/


</script>





    <script>
        var element = document.querySelector('.calendar');
        new Calendar(element,{
            language: 'fr'
        })








     </script>
    
    
</body>
</html>